// Container that the modal scrolls within
.modal {
  @include transition(visibility 0.3s);

  position: fixed;
  top: 50%;
  left: 50%;
  z-index: map-get($z-index, 'higher');

  // Set `--md` modifier as default
  width: calc(100vw - #{2 * 1.25rem});
  height: auto;
  max-height: 90vh;

  overflow: hidden;
  visibility: hidden;
  border-radius: $border-radius;
  outline: 0;
  transform: translateX(-50%) translateY(-50%);

  // Size Modifiers
  @include media-breakpoint-up(md) {
    &--sm {
      width: map-get($modal-size, 'sm');
    }

    &--md {
      width: map-get($modal-size, 'md');
    }

    &--lg {
      width: map-get($modal-size, 'lg');
    }

    &--xl {
      width: map-get($modal-size, 'xl');
    }
  }

  &--borderless .modal__dialog > div {
    border-bottom: 0;
  }

  // Toggles the visibility of the modal
  &--show {
    visibility: visible;
  }

  &__dialog {
    @include transition(
      opacity 0.3s,
      transform 0.3s
    );

    // scss-lint:disable ColorVariable
    color: #000;
    background-color: #fff;

    opacity: 0;
    transform: scale(0.7);

    > div {
      border-bottom: 1px solid map-get($brand-gray, 'light');
    }

    > div:last-of-type {
      border-bottom: 0;
    }
  }

  // Modal close button
  [data-hide="modal"]:not(.btn) {
    position: absolute;
    top: 0;
    right: 0;
    box-sizing: border-box;

    // add extra padding to increase the clickable area
    padding: 0.625rem 0.625rem 1rem 1rem;

    line-height: 0.625rem;
    background: transparent;
    border: 0;
  }

  // Modal Overlay
  &__overlay {
    @include transition(
      visibility 0.3s,
      opacity 0.3s
    );

    position: fixed;
    top: 0;
    left: 0;
    z-index: map-get($z-index, 'high');

    width: 100%;
    height: 100%;

    visibility: hidden;
    // scss-lint:disable ColorVariable
    background: #000;
    opacity: 0;
  }

  // Modal Header
  &__header {
    text-align: center;

    h3 {
      line-height: 1.4;
    }
  }

  // Modal Content
  &__content {
    position: relative;
    padding: 1.5rem 2.5rem;
    margin: 0 auto;
  }

  // Modal Footer
  &__footer {
    padding: 1rem;
    text-align: center;
  }

  // Kill the scroll on the body
  &__open {
    overflow: hidden;

    .modal {
      overflow-x: hidden;
      overflow-y: auto;
    }

    .modal__overlay {
      visibility: visible;
      opacity: 0.5;
    }

    .modal__dialog {
      opacity: 1;
      transform: scale(1);
    }
  }
}

// Modal inverse color
.modal.modal--inverse {
  .modal__dialog {
    // scss-lint:disable ColorVariable
    color: #fff;
    background-color: map-get($brand-black, 'darker');
  }

  .modal__dialog > div {
    border-bottom: 1px solid rgba(map-get($brand-blue, 'dark'), 0.4);
  }

  p,
  [data-hide="modal"]:not(.btn) {
    // scss-lint:disable ColorVariable
    color: #fff;
  }
}

.modal.modal--inverse .form {
  label {
    color: #fff;
  }

  input,
  textarea {
    color: #fff;
    background-color: map-get($brand-blue, 'dark');
    border-color: map-get($brand-blue, 'dark');

    &:focus {
      border-color: map-get($brand-blue, 'primary');
    }
  }

  .form__group {
    margin-bottom: 1.125rem;
    background-color: transparent;
  }

  .form__group:last-child {
    margin-bottom: 0;
  }

  .form__body {
    padding-top: 1.875rem;
    padding-bottom: 1.875rem;
  }

  .form__footer {
    padding-top: 1.125rem;
    padding-bottom: 1.125rem;
    text-align: center;
  }
}
